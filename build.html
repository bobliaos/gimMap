<html>
<head>
    <title>GimMap DEMO</title>
    <meta charset="utf-8">

    <script type="text/javascript" src="js/three.min.js"></script>
    <script type="text/javascript" src="js/stats.min.js"></script>
    <script type="text/javascript" src="js/tween.min.js"></script>

    <script type="text/javascript" src="build/gimmap.min.js"></script>

    <script type="text/javascript">
        function init() {
            var config = {
                server: "127.0.0.1",
                machindeNodeId: "node_2014_8_13_01:18:25_578",
                shadowRank: "6",
                sourceSVGURL: "assets/data.sgxml",
                sourceShopListURL: "assets/shoplist.json"
            };

            GIM.SERVER          = config.server;
            GIM.MACHINE_NODE_ID = config.machindeNodeId;
            GIM.SHADOW_MAP_SIZE = parseFloat(config.shadowRank) * 512;
            GIM.DATA_SOURCE_URL = config.sourceSVGURL;
            GIM.SHOP_LIST_URL   = config.sourceShopListURL;
        }

        var container;
        function showMap() {
            container = document.createElement("div");
            mapContainer.appendChild(container);

            container.appendChild(GIM.mapInstance);
        }

        function hideMap() {
            mapContainer.removeChild(container);
            delete container;
        }

        function navigateTo(){
            var shopId = document.getElementById("shopIdInput").value;
            if(shopId !== "")
                GIM.navitateTo(shopId);
            else
                alert("请先输入店铺号");
        }

        GIM.goDetail = function(shopId){
            alert("显示店铺 " + shopId + " 的详情!");
        }
    </script>
</head>
<body style="margin: 0;padding: 0;" onload="init()">
<div style="background: #0099CC;width: 1040px;height: 360px;cursor: pointer">
    <button onclick="showMap()">显示地图</button>
    <br/>
    <button onclick="hideMap()">隐藏地图</button>
    <br/>
    <input placeholder="请输入店铺号" id="shopIdInput" type="text" value=""/>
    <button onclick="navigateTo()">开始导航</button>
</div>
<div id="mapContainer" style="width: 1040px;height: 1440px;">
</div>
</body>
</html>
